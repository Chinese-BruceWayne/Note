> 学习地址：
>
> - https://developer.android.com/training/basics/firstapp/

# Build your first App

## Create first App

After create your `MyFirstApp`, you can then see the following files:

1. `./app/src/main/java/com.example.myfirstapp/MainActivity`: This is the main activity (the entry point for your app). When you build and run the app, the system launches an instance of this `Activity` and loads its layout.
2. `./app/src/res/layout/activity_main.xml`: This XML file defines the layout for the activity's UI. It contains a `TextView` element with the text "Hello world!".
3. `./app/src/AndroidManifest.xml`: The [manifest file](https://developer.android.com/guide/topics/manifest/manifest-intro.html) describes the fundamental characteristics of the app and defines each of its components.
4. `./app/build.gradle`: You'll see two files with this name: one for the project and one for the "app" module. Each module has its own `build.gradle` file, but this project currently has just one module. You'll mostly work with the module's `build.gradle` file to configure how the Gradle tools compile and build your app. For more information about this file, see [Configure Your Build](https://developer.android.com/studio/build/index.html).

## Run your app

### Run on a real device

Set up your devices as follows:

1. Connect your device to your development machine with a USB cable. If you're developing on Windows, you might need to [install the appropriate USB driver](https://developer.android.com/studio/run/oem-usb.html) for your device.

2. 然后 Google The Error Message，xjb 动一下就连上了。

### Run on a emulator

Run the app on an emulator as follows:

1. In Android Studio, click the **app** module in the **Project** window and then select **Run > Run** (or click **Run**  in the toolbar).
2. 然后点一下就好了。

## Build a simple user interface

The user interface for an Android app is built using a hierarchy of *layouts*([`ViewGroup`](https://developer.android.com/reference/android/view/ViewGroup.html) objects) and *widgets* ([`View`](https://developer.android.com/reference/android/view/View.html) objects).

1. Layouts are containers that control how their child views are positioned on the screen. 
2. Widgets are UI components such as buttons and text boxes.

### Open the Layout Editor

For additional information, see the [introduction to the Layout Editor](https://developer.android.com/studio/write/layout-editor.html#intro).

### Add a text box

Click the view in the design editor. You can now see the **resizing handles** on each corner (squares), and the **constraint anchors** on each side (circles).

### Add a button

### Change the UI strings

Add a string:

1. Open the Project window and then open `app/res/values/strings.xml`.

   This is a [string resources](https://developer.android.com/guide/topics/resources/string-resource.html) file where you should specify all your UI strings. Doing so allows you to manage all UI strings in a single location, which makes it easier to find, update, and localize (compared to hard-coding strings in your layout or app code).

2. Click **Open editor** at the top of the editor window. This opens the [Translations Editor](https://developer.android.com/studio/write/translations-editor.html), which provides a simple interface for adding and editing your default strings, and helps keep all your translated strings organized.

3. Click `Add Key` to create a new string as the "hint text" for the text box.

   1. In the **Add Key** dialog, enter "edit_message" for the key name.
   2. Enter "Enter a message" for the value.
   3. Click **OK**.

Apply string:

1. Click the text box in the layout and, if the **Attributes** window isn't already visible on the right, click **Attributes** on the right sidebar.
2. Locate the **text** property (currently set to "Name") and delete the value.
3. Locate the **hint** property and then click **Pick a Resource** to the right of the text box. In the dialog that appears, double-click on **`<your string key>`** from the list.

### Make the text box size flexible

For more information about chains and all the other things you can do with `ConstraintLayout`, read [Build a Responsive UI with ConstraintLayout](https://developer.android.com/training/constraint-layout/index.html).

## Start another activity

### Respond to the send button

1. In the file **app > java > com.example.myfirstapp > MainActivity**, add the `sendMessage()`method stub as shown below:

   ```java
   public class MainActivity extends AppCompatActivity {
       @Override
       protected void onCreate(Bundle savedInstanceState) {
           super.onCreate(savedInstanceState);
           setContentView(R.layout.activity_main);
       }
   
       /** Called when the user taps the Send button */
       public void sendMessage(View view) {
           // Do something in response to button
       }
   }
   ```

   You may see an error because Android Studio cannot resolve the `View` class used as the method argument. So click to place your cursor on the `View` declaration, and then perform a Quick Fix by pressing Alt + Enter (or Option + Enter on Mac). (If a menu appears, select **Import class**.)

2. Now return to the `activity_main.xml` file to call this method from the button:

   1. Click to select the button in the Layout Editor.
   2. In the **Attributes** window, locate the **onClick** property and select **sendMessage [MainActivity]** from the drop-down list.

Now when the button is tapped, the system calls the `sendMessage()` method.

### Build an Intent

An `Intent` is an object that provides runtime binding between separate components, such as two activities. The `Intent` represents an app’s "intent to do something." You can use intents for a wide variety of tasks, but in this lesson, your intent starts another activity.

In `MainActivity`, add the `EXTRA_MESSAGE` constant and the `sendMessage()` code, as shown here:

```javascript
public class MainActivity extends AppCompatActivity {
    public static final String EXTRA_MESSAGE = "com.example.myfirstapp.MESSAGE";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    /** Called when the user taps the Send button */
    public void sendMessage(View view) {
        Intent intent = new Intent(this, DisplayMessageActivity.class);
        EditText editText = (EditText) findViewById(R.id.editText);
        String message = editText.getText().toString();
        intent.putExtra(EXTRA_MESSAGE, message);
        startActivity(intent);
    }
}
```

Here's what's going on in `sendMessage()`:

- The `Intent` constructor takes two parameters:
  - A `Context` as its first parameter (`this` is used because the `Activity` class is a subclass of `Context`)
  - The `Class` of the app component to which the system should deliver the `Intent` (in this case, the activity that should be started).
- The `putExtra()` method adds the `EditText`'s value to the intent. An `Intent` can carry data types as key-value pairs called *extras*. Your key is a public constant `EXTRA_MESSAGE` because the next activity uses the key to retrieve the text value. It's a good practice to define keys for intent extras using your app's package name as a prefix. This ensures the keys are unique, in case your app interacts with other apps.
- The `startActivity()` method starts an instance of the `DisplayMessageActivity` specified by the `Intent`. Now you need to create that class.

### Create the second activity

1. In the **Project** window, right-click the **app** folder and select **New > Activity > Empty Activity**.
2. In the **Configure Activity** window, enter "DisplayMessageActivity" for **Activity Name** and click**Finish** (leave all other properties set to the defaults).

Android Studio automatically does three things:

- Creates the `DisplayMessageActivity` file.
- Creates the corresponding `activity_display_message.xml` layout file.
- Adds the required [`<activity>`](https://developer.android.com/guide/topics/manifest/activity-element.html) element in `AndroidManifest.xml`.

